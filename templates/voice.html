
<!DOCTYPE html>
<html lang='en-US'>
  <head>
{#    <link rel="icon" type="image/x-icon" href="https://www.highcharts.com/demo/static/favicon.ico">#}
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
{#    <title>Highcharts Demo Chart Chooser Radial Bar Chart</title>#}
{#    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">#}
    
    <style>
  body {
    margin: 0;
    color: #313131;
    font-family: sans-serif;
    min-width: 300px;
  }
  body.toc{
    font-family: 'Roboto', sans-serif;
    font-size: 15px;
  }
  h1 {
    font-size: 2em;
    margin: 0.67em 0;
    font-weight: bolder;
    text-transform: uppercase;
  }
  h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
    font-weight: bolder;
    text-transform: uppercase;
  }
  h3 {
    font-size: 1.17em;
    margin: 1em 0;
    font-weight: bolder;
    text-transform: uppercase;
  }
  h4 {
    font-weight: bolder;
    text-transform: uppercase;
  }

  .highcharts-samples-navbar {
    background-color: #47475C;
    height: 50px;
  }
  .highcharts-samples-navbar .sample-navbar-brand img {
    height: 66px;
    margin-top: auto;
    margin-bottom: auto;
    height: auto;
    max-height: 95%;
    margin-left: 5px;
    width: auto;
    max-width: 50vw;
  }
  .actions {
    float: right;
    max-width: 50vw;
  }
  .action {
    float: right;
    line-height: 50px;
    margin-right: 10px;
    text-decoration: none;
    font-size: 0.8em;
  }
  a.action {
    color: #424BCD;
  }
  a.action:hover {
    text-decoration: underline;
  }
  .action i.fab {
    font-size: 1.6em;
  }
  .action i.fa-jsfiddle {
    font-weight: 700;
  }
  .highcharts-samples-navbar a.action {
    color: #eeeaea;
  }
  .description {
    max-width: 800px;
    margin: 1em auto;
    padding: 10px;
  }
  .error {
    text-align: center;
    font-style: italic;
    color: red;
  }

  .embed .highcharts-samples-navbar {
    background-color: #EBEBEB;
    color: #3d3d3d;
    height: 50px;
  }
  .embed .sample-navbar-brand {
    display: none;
  }
  .embed a.action {
    color: #424BCD;
  }

  .nonav .highcharts-samples-navbar {
    display: none;
  }

  li{
    max-width: 60rem;
  }

  ul, menu, dir {
    display: block;
    list-style-type: disc;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: 40px;
    line-height: 1.25rem;
}

@media only screen and (max-width: 800px) {
  .actions .action {
    font-size: 0.65em;
  }
}


</style>
    <style>
      #container {
    height: 600px;
}

.highcharts-figure {
    min-width: 320px;
    max-width: 800px;
    margin: 1em auto;
}

    </style>

  </head>

<body >
{%  if data %}
    <form action="/voice" method="POST" style="margin-top: 30px">
      <div class="container">
        <div class="row my-3">
            <div class="text-right">
                <h5> <a href="{{ url_for('index') }}"> Home </a> </h5>
            </div>
        </div>
            <select name="file_choose" class="form-select-sm" aria-label="Пример выбора по умолчанию">
            <option selected>select File</option>
                {% for i in range(0, len_files) %}
                    <option value="{{ files[i] }}">{{ files[i] }}</option>
                {% endfor %}
            </select>
            <input type="text" name="daterange" value="01/01/2022 - 01/12/2022" />
                <div class = "input-group" style="margin-top: 5px">
                    <input type = "text" class = "form-control" name="text_search" size="61" placeholder="Добавьте объекты: втб или vtb, карта или кредитка">
                </div>

            <input type="submit" class="btn btn-light" href="{{ url_for('voice') }}" name="send" value="Запуск" style="margin-top: 5px">
        </form>


    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

    <!-- Flag sprites service provided by Martijn Lafeber,
      https://github.com/lafeber/world-flags-sprite/blob/master/LICENSE -->
    <link
      rel="stylesheet"
      href="https://github.com/downloads/lafeber/world-flags-sprite/flags16.css"
    />

    <div id="container"></div>


        <script>
        var data = JSON.parse('{{ data|tojson }}');
        var names = JSON.parse('{{ dict_names|tojson }}');
        const country = {}

        for (const [key, value] of Object.entries(names)) {
          country[key] = value;
        }


    Highcharts.chart("container", {
        colors: ["#FF3232", "#32ff32", "#C0C0C0"],
        country: country,
        chart: {
            type: "column",
            inverted: true,
            polar: true
        },
        accessibility: {
            keyboardNavigation: {
                seriesNavigation: {
                    mode: "serialize"
                }
            }
        },
        title: {
            text: "Media voice {{ theme }}"
        },
        tooltip: {
            outside: true
        },
        pane: {
            size: "85%",
            innerSize: "20%",
            endAngle: 270
        },
        xAxis: {
            tickInterval: 1,
            labels: {
                align: "right",
                useHTML: true,
                allowOverlap: true,
                step: 1,
                y: 3,
                style: {
                    fontSize: "13px"
                },
                formatter: function () {
                    return `${
                        this.value
                    } <span class='f16'><span id='flag' class='flag ${
                        country[this.value]
                    }'></span></span>`;
                }
            },
            lineWidth: 0,
            categories: Object.keys(country),
            accessibility: {
                description: "Products"
            }
        },
        yAxis: {
            crosshair: {
                enabled: true,
                color: "#333"
            },
            lineWidth: 0,
            tickInterval: 25,
            reversedStacks: false,
            endOnTick: true,
            showLastLabel: true,
            accessibility: {
                description: "Number of medals"
            }
        },
        plotOptions: {
            column: {
                stacking: "normal",
                borderWidth: 0,
                pointPadding: 0,
                groupPadding: 0.15
            }
        },
        series: [
            {
                name: "Negative",
                data: data.negative
            },
            {
                name: "Positive",
                data: data.positive
            },
            {
                name: "Neutral",
                data: data.neutral
            }
        ]
    });

        </script>
        <script>
        window.addEventListener('DOMContentLoaded', (event) => {
          /* Script for setting iframe height when on Highcharts.com */
              try {

                // Allow hiding the description by search param
                const search = window.location.search;
                if(search && search.includes('hide-description')){
                  const description = document.querySelector('.highcharts-description, .highcharts-linked-description');
                  if(description){
                    description.style.display = 'none';
                  }
                }

                const iframes = window.parent.document.getElementsByTagName('iframe');

                for(let iframe of iframes){
                  const { height } = iframe.contentWindow.document.body.getBoundingClientRect();
                  if (
                    height &&
                    height > iframe.height
                  ) {
                    iframe.setAttribute('height', height);
                    iframe.style.setProperty('height', height + 25 + 'px')
                  }
                }
              } catch (e) {}
        });
        </script>


            <style>
  body {
    margin: 0;
    color: #313131;
    font-family: sans-serif;
    min-width: 300px;
  }
  body.toc{
    font-family: 'Roboto', sans-serif;
    font-size: 15px;
  }
  h1 {
    font-size: 2em;
    margin: 0.67em 0;
    font-weight: bolder;
    text-transform: uppercase;
  }
  h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
    font-weight: bolder;
    text-transform: uppercase;
  }
  h3 {
    font-size: 1.17em;
    margin: 1em 0;
    font-weight: bolder;
    text-transform: uppercase;
  }
  h4 {
    font-weight: bolder;
    text-transform: uppercase;
  }

  .highcharts-samples-navbar {
    background-color: #47475C;
    height: 50px;
  }
  .highcharts-samples-navbar .sample-navbar-brand img {
    height: 66px;
    margin-top: auto;
    margin-bottom: auto;
    height: auto;
    max-height: 95%;
    margin-left: 5px;
    width: auto;
    max-width: 50vw;
  }
  .actions {
    float: right;
    max-width: 50vw;
  }
  .action {
    float: right;
    line-height: 50px;
    margin-right: 10px;
    text-decoration: none;
    font-size: 0.8em;
  }
  a.action {
    color: #424BCD;
  }
  a.action:hover {
    text-decoration: underline;
  }
  .action i.fab {
    font-size: 1.6em;
  }
  .action i.fa-jsfiddle {
    font-weight: 700;
  }
  .highcharts-samples-navbar a.action {
    color: #eeeaea;
  }
  .description {
    max-width: 800px;
    margin: 1em auto;
    padding: 10px;
  }
  .error {
    text-align: center;
    font-style: italic;
    color: red;
  }

  .embed .highcharts-samples-navbar {
    background-color: #EBEBEB;
    color: #3d3d3d;
    height: 50px;
  }
  .embed .sample-navbar-brand {
    display: none;
  }
  .embed a.action {
    color: #424BCD;
  }

  .nonav .highcharts-samples-navbar {
    display: none;
  }

  li{
    max-width: 60rem;
  }

  ul, menu, dir {
    display: block;
    list-style-type: disc;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: 40px;
    line-height: 1.25rem;
}

@media only screen and (max-width: 800px) {
  .actions .action {
    font-size: 0.65em;
  }
}


</style>
    <style>
      #container {
    width: 100%;
    max-height: 600px;
    margin: auto;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}
  #container2 {
    width: 1500px;
    height: 800px;
    margin: 0 auto;
    margin-top: 250px;
    margin-block-end: 100px;
  }
    </style>

  </head>
  <body class="embed">

{#<div class="highcharts-samples-navbar">#}
{#  <a href="https://www.highcharts.com" class="sample-navbar-brand" title="Highcharts">#}
{#    <img src="https://wp-assets.highcharts.com/svg/highcharts-logo-padded.svg" alt="Highcharts">#}
{#  </a>#}
{#  <div class="actions">#}
{#    <a href="/samples/highcharts/chartchooser/categorical-comparison-treemap?codepen" id="codepenButton" target="_blank" rel="noreferrer noopener" class="action">#}
{#      <i class="fab fa-codepen"></i> CodePen#}
{#    </a>#}
{##}
{#      <a href="https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/chartchooser/categorical-comparison-treemap" class="action" target="_blank" rel="noreferrer noopener">#}
{#      <i class="fab fa-jsfiddle"></i> jsFiddle#}
{#    </a>#}
{#  </div>#}
{#</div>#}


<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/treemap.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<script src="https://code.highcharts.com/modules/sankey.js"></script>


<div id="container2"></div>
<script>

    var data_list = []
    var data_sunkey = []

    {#for (i = 0; i < data.fin_list.length; i++) {#}
    {#    data_list.push(#}
    {#        data.fin_list[i]#}
    {#    )#}
    {#}#}

    for (i = 0; i < data.list_sunkey_hubs.length; i++) {
        data_list.push(
            data.list_sunkey_hubs[i]
        )
    }

    for (i = 0; i < data.list_sunkey_post_type.length; i++) {
        data_list.push(
            data.list_sunkey_post_type[i]
        )
    }

    for (i = 0; i < data.tonality_by_post_type.length; i++) {
        data_list.push(
            data.tonality_by_post_type[i]
        )
    }

    for (i = 0; i < data.names.length; i++) {
        data_sunkey.push(
            {
                id: data.names[i],
                color: "#ffa500",
                offset: -10
                }
        )
    }

    for (i = 0; i < data.type_message.length; i++) {
        data_sunkey.push(
            {
                id: data.type_message[i],
                color: "#74ffe7",
                column: 2,
                offset: 50
            }
        )
    }

    for (i = 0; i < data.tonality.length; i++) {
        data_sunkey.push(
            {
                id: data.tonality[i],
                color: "#e6e6e6",
                column: 3,
                offset: -20
            }
        )
    }

    for (i = 0; i < data.hubs.length; i++) {
        data_sunkey.push(
                      {
            id: data.hubs[i],
            color: "#009c00"
        }
        )
    }


    Highcharts.chart("container2", {
    title: {
        text: "Voice values streaming"
    },

    tooltip: {
        headerFormat: null,
        pointFormat:
      "{point.fromNode.name} \u2192 {point.toNode.name}: {point.weight:.0f} сообщ.",
        nodeFormat: "{point.name}: {point.sum:.2f} quads"
    },
    series: [
        {
            borderColor: "#1a1a1a",
            borderWidth: 1,
            keys: ["from", "to", "weight"],
            nodes: data_sunkey,
            data: data_list,
            type: "sankey",
            name: "Data values streaming",
            dataLabels: {
                style: {
                    color: "#1a1a1a",
                    textOutline: false
                }
            }
        }
    ]
});

    </script>
    <script>
    window.addEventListener('DOMContentLoaded', (event) => {
      /* Script for setting iframe height when on Highcharts.com */
          try {

            // Allow hiding the description by search param
            const search = window.location.search;
            if(search && search.includes('hide-description')){
              const description = document.querySelector('.highcharts-description, .highcharts-linked-description');
              if(description){
                description.style.display = 'none';
              }
            }

            const iframes = window.parent.document.getElementsByTagName('iframe');

            for(let iframe of iframes){
              const { height } = iframe.contentWindow.document.body.getBoundingClientRect();
              if (
                height &&
                height > iframe.height
              ) {
                iframe.setAttribute('height', height);
                iframe.style.setProperty('height', height + 25 + 'px')
              }
            }
          } catch (e) {}
    });
    </script>

        {% endif %}

{%  if not data %}
    <form action="/voice" method="POST" style="margin-top: 30px">
      <div class="container">
        <div class="row my-3">
            <div class="text-right">
                <h5> <a href="{{ url_for('index') }}"> Home </a> </h5>
            </div>
        </div>
            <select name="file_choose" class="form-select-sm" aria-label="Пример выбора по умолчанию">
            <option selected>select File</option>
                {% for i in range(0, len_files) %}
                    <option value="{{ files[i] }}">{{ files[i] }}</option>
                {% endfor %}
            </select>
            <input type="text" name="daterange" value="01/01/2022 - 01/12/2022" />
                <div class = "input-group" style="margin-top: 5px">
                    <input type = "text" class = "form-control" name="text_search" size="61" placeholder="Добавьте объекты: втб или vtb, карта или кредитка">
                </div>

            <input type="submit" class="btn btn-light" href="{{ url_for('voice') }}" name="send" value="Запуск" style="margin-top: 5px">
        </form>


    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

    <!-- Flag sprites service provided by Martijn Lafeber,
      https://github.com/lafeber/world-flags-sprite/blob/master/LICENSE -->
    <link
      rel="stylesheet"
      href="https://github.com/downloads/lafeber/world-flags-sprite/flags16.css"
    />

    <div id="container"></div>


        <script>
        const country = {
        Norway: "no",
        "United States": "us",
        Germany: "de",
        Canada: "ca",
        Austria: "at"
    };

    Highcharts.chart("container", {
        colors: ["#FFD700", "#C0C0C0", "#CD7F32"],
        {#country: {#}
        {#    Norway: "no",#}
        {#    "United States": "us",#}
        {#    Germany: "de",#}
        {#    Canada: "ca",#}
        {#    Austria: "at"#}
        {#},#}
        chart: {
            type: "column",
            inverted: true,
            polar: true
        },
        accessibility: {
            keyboardNavigation: {
                seriesNavigation: {
                    mode: "serialize"
                }
            }
        },
        title: {
            text: "Winter Olympic medals per existing country (TOP 5)"
        },
        tooltip: {
            outside: true
        },
        pane: {
            size: "85%",
            innerSize: "20%",
            endAngle: 270
        },
        xAxis: {
            tickInterval: 1,
            labels: {
                align: "right",
                useHTML: true,
                allowOverlap: true,
                step: 1,
                y: 3,
                style: {
                    fontSize: "13px"
                },
                formatter: function () {
                    return `${
                        this.value
                    } <span class='f16'><span id='flag' class='flag ${
                        country[this.value]
                    }'></span></span>`;
                }
            },
            lineWidth: 0,
            categories: ["Norway", "United States", "Germany", "Canada", "Austria"],
            accessibility: {
                description: "Countries"
            }
        },
        yAxis: {
            crosshair: {
                enabled: true,
                color: "#333"
            },
            lineWidth: 0,
            tickInterval: 25,
            reversedStacks: false,
            endOnTick: true,
            showLastLabel: true,
            accessibility: {
                description: "Number of medals"
            }
        },
        plotOptions: {
            column: {
                stacking: "normal",
                borderWidth: 0,
                pointPadding: 0,
                groupPadding: 0.15
            }
        },
        series: [
            {
                name: "Gold medals",
                data: [132, 105, 92, 73, 64]
            },
            {
                name: "Silver medals",
                data: [125, 110, 86, 64, 81]
            },
            {
                name: "Bronze medals",
                data: [111, 90, 60, 62, 87]
            }
        ]
    });

        </script>
        <script>
        window.addEventListener('DOMContentLoaded', (event) => {
          /* Script for setting iframe height when on Highcharts.com */
              try {

                // Allow hiding the description by search param
                const search = window.location.search;
                if(search && search.includes('hide-description')){
                  const description = document.querySelector('.highcharts-description, .highcharts-linked-description');
                  if(description){
                    description.style.display = 'none';
                  }
                }

                const iframes = window.parent.document.getElementsByTagName('iframe');

                for(let iframe of iframes){
                  const { height } = iframe.contentWindow.document.body.getBoundingClientRect();
                  if (
                    height &&
                    height > iframe.height
                  ) {
                    iframe.setAttribute('height', height);
                    iframe.style.setProperty('height', height + 25 + 'px')
                  }
                }
              } catch (e) {}
        });
        </script>
        {% endif %}

    </body>
</html>